import{getConfig as e,getMetadata as t,loadIms as a,loadStyle as n,loadLana as s,decorateLinks as i,loadScript as r,getGnavSource as o,getFederatedUrl as l,getFedsPlaceholderConfig as c}from"../../utils/utils.js";(async()=>{const{miloLibs:a,codeRoot:i,theme:r}=e(),o=`${a||i}/blocks/global-navigation/`,l=e=>new Promise(((t,a)=>{n(e,(n=>"error"===n?a(e):t()))}));try{await l(`${o}base.css`),"dark"===r&&await l(`${o}dark-nav.css`)}catch(e){const a=t("gnav-source");window.lana?.log||s(),window.lana.log(`GNAV: Error in loadStyles | gnav-source: ${a} | href: ${window.location.href} | error loading style: ${e}`,{clientId:"feds-milo",sampleRate:1,tags:"utilities",errorType:"info"})}})();const d=(async()=>{const t=await o(),[a]=t.split("#");let n=l(a);const s=e()?.mep?.inBlock?.["global-navigation"],i=s?.fragments?.[n];"replace"===i?.action&&(n=i.content);return await fetch(n.replace(/(\.html$|$)/,".plain.html"))})(),p=t("gnav-promo-source")?import("./features/aside/aside.js"):null,u=document.querySelector("header")?.classList.contains("has-breadcrumbs")?import("./features/breadcrumbs/breadcrumbs.js"):null,[m,v,h]=await Promise.all([import("./utilities/utilities.js"),import("../../features/placeholders.js"),import("../merch/merch.js")]),{replaceKey:f,replaceKeyArray:g}=v,{getMiloLocaleSettings:b}=h,{closeAllDropdowns:y,decorateCta:w,fetchAndProcessPlainHtml:k,getActiveLink:L,getAnalyticsValue:N,getExperienceName:S,isActiveLink:E,icons:$,isDesktop:A,isTangentToViewport:M,lanaLog:x,loadDecorateMenu:C,rootPath:I,loadStyles:T,logErrorFor:P,selectors:q,setActiveDropdown:O,setCurtainState:U,setUserProfile:G,toFragment:D,trigger:W,yieldToMain:H,addMepHighlightAndTargetId:j,isDarkMode:F,darkIcons:R,setDisableAEDState:B,animateInSequence:V,transformTemplateToMobile:_,closeAllTabs:z,disableMobileScroll:K,enableMobileScroll:Y,setAsyncDropdownCount:J,branchBannerLoadCheck:Q,getBranchBannerInfo:X,loaderMegaMenu:Z,logPerformance:ee}=m,te=e()?.signInContext;export const CONFIG={icons:F()?R:$,delays:{mainNavDropdowns:800,loadDelayed:3e3,keyboardNav:8e3},features:["gnav-brand","gnav-promo","search","profile","app-launcher","adobe-logo"],universalNav:{components:{profile:{name:"profile",attributes:{isSignUpRequired:!1,messageEventListener:(()=>{const t=e().unav?.profile?.messageEventListener;return t||(e=>{const{name:t,payload:a,executeDefaultAction:n}=e.detail;if(t&&"System"===t&&a&&"function"==typeof n)switch(a.subType){case"AppInitiated":window.adobeProfile?.getUserProfile().then((e=>{G(e)})).catch((()=>{G({})}));break;case"SignOut":n();break;case"ProfileSwitch":Promise.resolve(n()).then((e=>{e&&window.location.reload()}))}})})(),componentLoaderConfig:{config:{enableLocalSection:!0,enableProfileSwitcher:!0,miniAppContext:{logger:{trace:()=>{},debug:()=>{},info:()=>{},warn:e=>x({message:"Profile Menu warning",e,tags:"universalnav,warn"}),error:e=>x({message:"Profile Menu error",e,tags:"universalnav",errorType:"e"})}},...e().unav?.profile?.config}},complexConfig:e().unav?.profile?.complexConfig||null,callbacks:{onSignIn:()=>{window.adobeIMS?.signIn(te)},onSignUp:()=>{window.adobeIMS?.signIn(te)}}}},appswitcher:{name:"app-switcher"},notifications:{name:"notifications",attributes:{notificationsConfig:{applicationContext:{appID:e().unav?.uncAppId||"adobecom",...e().unav?.uncConfig}}}},help:{name:"help",attributes:{children:function(){const{unav:t}=e();return t?.unavHelpChildren||[{type:"Support"},{type:"Community"}]}()}},jarvis:{name:"jarvis",attributes:{appid:e().jarvis?.id,callbacks:e().jarvis?.callbacks}},cart:{name:"cart"}}}};export const osMap={Mac:"macOS",Win:"windows",Linux:"linux",CrOS:"chromeOS",Android:"android",iPad:"iPadOS",iPhone:"iOS"};export const LANGMAP={cs:["cz"],da:["dk"],de:["at"],en:["africa","au","ca","ie","in","mt","ng","nz","sg","za"],es:["ar","cl","co","cr","ec","gt","la","mx","pe","pr"],et:["ee"],ja:["jp"],ko:["kr"],nb:["no"],pt:["br"],sl:["si"],sv:["se"],uk:["ua"],zh:["cn","tw"]};const ae=(e={})=>{"function"==typeof window.adobeIMS?.signIn?window.adobeIMS.signIn(e):x({message:"IMS signIn method not available",tags:"gnav,warn"})};let ne;const se=(e,t)=>{if(!e)return t?CONFIG.icons.brand:CONFIG.icons.company;const a=e?.textContent||"",[n,s]=a.split("|");if(n.trim().length){const e=D`<img src="${n.trim()}" />`;return s&&(e.alt=s.trim()),e}return t?CONFIG.icons.brand:CONFIG.icons.company};export const getUniversalNavLocale=e=>{if(!e.prefix||"/"===e.prefix)return"en_US";const t=e.prefix.replace("/","");if(t.includes("_")){const[e,a]=t.split("_").reverse();return`${e.toLowerCase()}_${a.toUpperCase()}`}if("uk"===t)return"en_GB";const a=Object.keys(LANGMAP).find((e=>LANGMAP[e].includes(t)));return a?`${a.toLowerCase()}_${t.toUpperCase()}`:`${t.toLowerCase()}_${t.toUpperCase()}`};class ie{constructor({content:t,block:a,newMobileNav:n}={}){this.content=t,this.block=a,this.customLinks=e()?.customLinks?.split(",")||[],this.blocks={profile:{rawElem:this.content.querySelector(".profile"),decoratedElem:D`<div data-cs-mask class="feds-profile"></div>`},search:{config:{icon:CONFIG.icons.search}},breadcrumbs:{wrapper:""}},this.setupUniversalNav(),this.elements={},this.newMobileNav=n}getOriginalTitle=e=>this.originalTitle||=e.textContent?.split("::");setupUniversalNav=()=>{const e=t("universal-nav")?.toLowerCase();this.universalNavComponents=e?.split(",").map((e=>e.trim())).filter((e=>Object.keys(CONFIG.universalNav.components).includes(e)||"signup"===e)),this.useUniversalNav="on"===e||!!this.universalNavComponents?.length,this.useUniversalNav&&(delete this.blocks.profile,this.blocks.universalNav=D`<div class="feds-utilities"></div>`,this.blocks.universalNav.addEventListener("click",(()=>{this.isToggleExpanded()&&this.toggleMenuMobile()}),!0))};init=()=>P((async()=>{Q(this.updatePopupPosition),this.elements.curtain=D`<div class="feds-curtain"></div>`;const e=[this.decorateAside,this.decorateMainNav,this.decorateTopNav,this.decorateTopnavWrapper,this.ims,this.addChangeEventListeners],a=()=>{(async e=>{ne=ne||new Promise((async t=>{const{default:a}=await import("./utilities/keyboard/index.js");t(new a(e))}))})(this.isLocalNav())};this.block.addEventListener("click",this.loadDelayed),this.block.addEventListener("keydown",a),setTimeout(this.loadDelayed,CONFIG.delays.loadDelayed),setTimeout(a,CONFIG.delays.keyboardNav);for(const t of e)await H(),await t();document.addEventListener("click",(e=>((e,a,n)=>{if(a&&n.classList.contains("feds-nav-wrapper--expanded"))return;const s="off"!==t("mobile-gnav-v2");if(!A.matches&&!s)return;const i=`${q.globalNav} [aria-expanded = "true"]:not(.universal-nav-container *), ${q.localNav} [aria-expanded = "true"]`;if(![...document.querySelectorAll(i)].find((t=>t.parentElement.contains(e.target)))){const e=a?document.querySelector("header.new-nav + .feds-localnav .feds-localnav-items"):void 0;y({animatedElement:e,animationType:a?"transition":void 0})}})(e,this.isLocalNav(),this.elements.navWrapper))),A.addEventListener("change",y)}),"Error in global navigation init","gnav","e");ims=async()=>window.adobeIMS?.initialized?this.imsReady():a().then((()=>this.imsReady())).catch((e=>{"IMS timeout"!==e?.message?x({message:"GNAV: Error with IMS",e,tags:"gnav",errorType:"i"}):window.addEventListener("onImsLibInstance",(()=>this.imsReady()))}));decorateProductEntryCTA=()=>{const e=this.content.querySelector(".product-entry-cta a");if(!e)return null;const t=w({elem:e,type:this.getMainNavItemType(e)});return t.closest(".feds-cta-wrapper").classList.add("feds-product-entry-cta"),t};decorateTopNav=()=>{this.elements.mobileToggle=this.decorateToggle(),this.elements.topnav=D`
      <nav class="feds-topnav" aria-label="Main">
        <div class="feds-brand-container">
          ${this.elements.mobileToggle}
          ${this.decorateBrand()}
        </div>
        ${this.elements.navWrapper}
        ${"on"===t("product-entry-cta")?.toLowerCase()?this.decorateProductEntryCTA():""}
        ${"on"===e().searchEnabled?D`<div class="feds-client-search"></div>`:""}
        ${this.useUniversalNav?this.blocks.universalNav:""}
        ${e().selfIntegrateUnav?D`<div class="feds-client-unav"></div>`:""}
        ${!this.useUniversalNav&&this.blocks.profile.rawElem?this.blocks.profile.decoratedElem:""}
        ${this.decorateLogo()}
      </nav>
    `};decorateLocalNav=async()=>{if(!this.isLocalNav()){const e=document.querySelector(".feds-localnav");return void(e&&(x({message:"Gnav Localnav was removed, potential CLS",tags:"gnav-localnav,warn"}),e.remove()))}const e=this.elements.navWrapper.querySelector(".feds-nav").querySelectorAll(".feds-navItem:not(.feds-navItem--section, .feds-navItem--mobile-only)"),t=e[0]?.querySelector("a")||e[0]?.querySelector("button");if(!t)return void x({message:"GNAV: Incorrect authoring of localnav found.",tags:"gnav",errorType:"i"});const[a,n=""]=this.getOriginalTitle(t);let s=document.querySelector(".feds-localnav");s||(x({message:"GNAV: Localnav does not include 'localnav' in its name.",tags:"gnav",errorType:"i"}),s=D`<div class="feds-localnav"/>`,this.block.after(s)),s.setAttribute("daa-lh",`${a}_localNav`);const i=D`<button class="feds-navLink--hoverCaret feds-localnav-title" aria-haspopup="true" aria-expanded="false" daa-ll="${a}_localNav|open"></button>`,r=D` <div class="feds-localnav-curtain"></div>`;s.append(i,r,D` <div class="feds-localnav-items" role="list"></div>`,D`<a href="#" class="feds-sr-only feds-localnav-exit">.</a>`);const o=s.querySelector(".feds-localnav-items"),l=document.querySelector(".feds-localnav-title");new MutationObserver((()=>{const e="true"===l.getAttribute("aria-expanded");o.toggleAttribute("aria-hidden",!e),[...o.childNodes].forEach((t=>{t.querySelector("a, button").toggleAttribute("aria-hidden",!e),t.querySelector("a, button").setAttribute("tabindex",e?"0":"-1")}))})).observe(l,{attributes:!0,attributeFilter:["aria-expanded"]});const d=await f("overview",c());e.forEach(((e,t)=>{const i=e.cloneNode(!0),r=i.querySelector("a, button");r&&(r.dataset.title=r.textContent),0===t&&(s.querySelector(".feds-localnav-title").innerText=a.trim(),r.textContent=n.trim()||d),o.appendChild(i)})),s.querySelector(".feds-localnav-title").addEventListener("click",(()=>{s.classList.toggle("feds-localnav--active");const e=s.classList.contains("feds-localnav--active");s.querySelector(".feds-localnav-title").setAttribute("aria-expanded",e),s.querySelector(".feds-localnav-title").setAttribute("daa-ll",`${a}_localNav|${e?"close":"open"}`)}));const p=s.querySelector(".feds-localnav-curtain");p.addEventListener("click",(e=>{W({element:e.currentTarget,event:e,type:"localNav-curtain",animatedElement:o,animationType:"transition"})}));document.querySelector(".feds-promo-aside-wrapper")&&s.classList.add("has-promo"),this.elements.localNav=s,t.textContent=a.trim();const u=()=>0===this.elements.localNav.getBoundingClientRect().top;window.addEventListener("scroll",(e=>{const t=this.elements.localNav?.classList;t.contains("feds-localnav--active")&&W({element:p,event:e,type:"localNav-curtain",animatedElement:o,animationType:"transition"}),u()?t?.contains("is-sticky")||t?.add("is-sticky"):t?.remove("is-sticky")}))};decorateTopnavWrapper=async()=>{const e=A.matches?await this.decorateBreadcrumbs():"";this.elements.topnavWrapper=D`<div class="feds-topnav-wrapper">
        ${this.elements.topnav}
        ${e}
      </div>
      `,this.block.append(this.elements.curtain,this.elements.topnavWrapper)};addChangeEventListeners=()=>{A.addEventListener("change",(()=>{A.matches?(this.elements.mainNav instanceof HTMLElement&&this.elements.search instanceof HTMLElement&&this.elements.mainNav.after(this.elements.search),this.elements.topnav instanceof HTMLElement&&this.elements.breadcrumbsWrapper instanceof HTMLElement&&this.elements.topnav.after(this.elements.breadcrumbsWrapper)):(this.elements.mainNav instanceof HTMLElement&&this.elements.search instanceof HTMLElement&&this.elements.mainNav.before(this.elements.search),this.elements.navWrapper instanceof HTMLElement&&this.elements.breadcrumbsWrapper instanceof HTMLElement&&this.elements.navWrapper.prepend(this.elements.breadcrumbsWrapper))}));const e=()=>{const e=M.matches&&this.elements.topnav?.scrollWidth&&this.elements.topnav.scrollWidth>document.body.clientWidth;this.elements.topnav.classList.toggle(q.overflowingTopNav.slice(1),e),window.dispatchEvent(new CustomEvent("feds:navOverflow",{detail:{isOverflowing:e}}))};e(),M.addEventListener("change",e)};loadDelayed=async()=>(this.ready=this.ready||new Promise((async e=>{try{if(this.block.removeEventListener("click",this.loadDelayed),this.block.removeEventListener("keydown",this.loadDelayed),this.searchPresent()){const[{default:e}]=await Promise.all([import("./features/search/gnav-search.js"),T(I("features/search/gnav-search.css"))]);this.Search=e}if(!this.useUniversalNav){const[{default:e}]=await Promise.all([import("./features/profile/dropdown.js"),T(I("features/profile/dropdown.css"))]);this.ProfileDropdown=e}e()}catch(t){x({message:"GNAV: Error within loadDelayed",e:t,tags:"gnav,warn"}),e()}})),this.ready);imsReady=async()=>{window.adobeIMS.isSignedInUser()&&this.useUniversalNav||G({});const e=[this.useUniversalNav?this.decorateUniversalNav:this.decorateProfile];try{for await(const t of e)await H(),await t()}catch(e){x({e,tags:"gnav",errorType:"i",message:"GNAV: issues within imsReady - "+(this.useUniversalNav?"decorateUniversalNav":"decorateProfile")})}};decorateProfile=async()=>{const{rawElem:t,decoratedElem:a}=this.blocks.profile;if(!t)return;if(!window.adobeIMS.isSignedInUser())return void await(async({rawElem:e,decoratedElem:t})=>{const a=e.querySelector(":scope > div:nth-child(2)"),n=await f("sign-in",c());let s;if(a){s=D`<button daa-ll="${n}" class="feds-signIn" aria-expanded="false" aria-haspopup="true">${n}</button>`,s.addEventListener("click",(e=>W({element:s,event:e}))),s.addEventListener("keydown",(e=>"Escape"===e.code&&y())),a.addEventListener("keydown",(e=>"Escape"===e.code&&y())),a.classList.add("feds-signIn-dropdown");const e=a.querySelector('[href$="?sign-in=true"]');if(e){const t=D`<button class="feds-signIn">${e.textContent}</button>`;e.replaceWith(t),t.addEventListener("click",(e=>{e.preventDefault(),ae(te)}))}else x({message:"Sign in link not found in dropdown.",tags:"gnav,warn"});t.append(a)}else s=D`<button daa-ll="${n}" class="feds-signIn">${n}</button>`,s.addEventListener("click",(e=>{e.preventDefault(),ae(te)}));t.prepend(s)})({rawElem:t,decoratedElem:a});const n=window.adobeIMS.getAccessToken(),{env:s}=e(),i=new Headers({Authorization:`Bearer ${n.token}`}),r=await fetch(`https://${s.adobeIO}/profile`,{headers:i});if(200!==r.status)return void x({message:"GNAV: decorateProfile has failed to fetch profile data",e:`${r.statusText} url: ${r.url}`,tags:"gnav",errorType:"i"});const{sections:o,user:{avatar:l}}=await r.json();let d;this.blocks.profile.buttonElem=await(async({avatar:e})=>{const[t,a]=await g(["profile-button","profile-avatar"],c());return D`
    <button
      data-cs-mask
      class="feds-profile-button"
      aria-expanded="false"
      aria-controls="feds-profile-menu"
      aria-label="${t}"
      daa-ll="Account"
      aria-haspopup="true"
    >
      <img data-cs-mask class="feds-profile-img" src="${e}" alt="${a}"></img>
    </button>
  `})({avatar:l}),a.append(this.blocks.profile.buttonElem);const p=async e=>{this.blocks.profile.buttonElem.removeEventListener("click",p),clearTimeout(d),await this.loadDelayed(),this.blocks.profile.dropdownInstance=new this.ProfileDropdown({rawElem:t,decoratedElem:a,avatar:l,sections:o,buttonElem:this.blocks.profile.buttonElem,openOnInit:e instanceof Event})};this.blocks.profile.buttonElem.addEventListener("click",p),d=setTimeout(p,CONFIG.delays.loadDelayed)};decorateUniversalNav=async()=>{performance.mark("Unav-Start");const t=e(),a=getUniversalNavLocale(t.locale),n="prod"===t.env.name?"prod":"stage",s=window.alloy?await window.alloy("getIdentity").then((e=>e?.identity?.ECID)).catch((()=>{})):void 0,i=S(),o=()=>{const e=navigator.userAgent;for(const[t,a]of Object.entries(osMap))if(e.includes(t))return a;return"linux"},l=new URLSearchParams(window.location.search).get("unavVersion")||"1.4";await Promise.all([r(`https://${n}.adobeccstatic.com/unav/${l}/UniversalNav.js`),T(`https://${n}.adobeccstatic.com/unav/${l}/UniversalNav.css`,!0)]);const c=()=>{const e=[CONFIG.universalNav.components.profile];return e[0].attributes.isSignUpRequired=!1,this.universalNavComponents?.forEach((t=>{"profile"!==t&&("signup"!==t?e.push(CONFIG.universalNav.components[t]):e[0].attributes.isSignUpRequired=!0)})),e},d=e=>{if(!e)return;e.event||(e.event={type:e.type,subtype:e.subtype}),e.source||(e.source={name:e.workflow?.toLowerCase().trim()});const t=(()=>{const{event:{type:t,subtype:a}={},source:{name:n}={},content:{name:s}={}}=e;switch(`${n}|${t}|${a}${s?`|${s}`:""}`){case"profile|click|sign-in":return`Sign In|gnav|${i}|unav`;case"profile|render|component":return`Account|gnav|${i}|unav`;case"profile|click|account":return`View Account|gnav|${i}|unav`;case"profile|click|sign-out":return`Sign Out|gnav|${i}|unav`;case"app-switcher|render|component":return"AppLauncher.appIconToggle";case`app-switcher|click|app|${s}`:return`AppLauncher.appClick.${r=s,r?.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}`;case"app-switcher|click|footer|adobe-home":return"AppLauncher.adobe.com";case"app-switcher|click|footer|all-apps":return"AppLauncher.allapps";case"app-switcher|click|footer|adobe-dot-com":return"AppLauncher.adobe.com";case"app-switcher|click|footer|see-all-apps":return"AppLauncher.allapps";case"unc|click|icon":return"Open Notifications panel";case"unc|click|link":return"Open Notification";case"unc|click|markRead":return"Mark Notification as read";case"unc|click|dismiss":return"Dismiss Notifications";case"unc|click|markUnread":return"Mark Notification as unread";default:return null}var r})();t&&window._satellite?.track("event",{xdm:{},data:{web:{webInteraction:{name:t}}}})},p=()=>({target:this.blocks.universalNav,env:n,locale:a,countryCode:b(e().locale)?.country||"US",imsClientId:window.adobeid?.client_id,theme:F()?"dark":"light",analyticsContext:{consumer:{name:"adobecom",version:"1.0",platform:"Web",device:o(),os_version:navigator.platform},event:{visitor_guid:s},onAnalyticsEvent:d},children:c(),isSectionDividerRequired:e()?.unav?.showSectionDivider,showTrayExperience:!A.matches});CONFIG.universalNav.universalNavConfig=p(),await window.UniversalNav(CONFIG.universalNav.universalNavConfig);const u=document.querySelector(".feds-promo-aside-wrapper"),m=document.querySelector(".feds-utilities"),v=this.universalNavComponents.includes("appswitcher"),h=()=>{const e=m.querySelector(".unav-comp-app-switcher-open");u.style.zIndex=e?0:11};u&&v&&!A.matches&&(new MutationObserver(h).observe(m,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),h()),performance.mark("Unav-End"),ee("Unav-Time","Unav-Start","Unav-End"),this.decorateAppPrompt({getAnchorState:()=>window.UniversalNav.getComponent?.("app-switcher")}),A.addEventListener("change",(()=>{window.UniversalNav.reload(p()),u&&h()}))};decorateAppPrompt=async({getAnchorState:a}={})=>{performance.mark("PEP-Start");const n=t("app-prompt")?.toLowerCase(),s=t("app-prompt-entitlement")?.toLowerCase(),i=t("app-prompt-path")?.toLowerCase(),r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Touch/i.test(navigator.userAgent);if("off"===n||!window.adobeIMS?.isSignedInUser()||!A.matches||r||!s?.length||!i?.length)return;const{base:o}=e(),[l]=await Promise.all([import("../../features/webapp-prompt/webapp-prompt.js"),T(`${o}/features/webapp-prompt/webapp-prompt.css`)]);await l.default({promptPath:i,entName:s,parent:this.blocks.universalNav,getAnchorState:a}),performance.mark("PEP-End"),ee("PEP-Time","PEP-Start","PEP-End")};loadSearch=()=>{const e=!!this.blocks?.search?.instance,t=!this.searchPresent();return e||t?null:this.loadDelayed().then((()=>{this.blocks.search.instance=new this.Search(this.blocks.search.config)})).catch((()=>{}))};isToggleExpanded=()=>"true"===this.elements.mobileToggle?.getAttribute("aria-expanded");isLocalNav=()=>this.newMobileNav&&this.elements.navWrapper?.querySelectorAll(".feds-nav > section.feds-navItem")?.length<=1;hasMegaMenu=()=>this.elements.navWrapper?.querySelectorAll(".feds-nav > section.feds-navItem")?.length>=1;toggleMenuMobile=()=>{const e=this.elements.mobileToggle,t=this.isToggleExpanded();if(!t&&this.newMobileNav){const e=document.querySelectorAll("header.new-nav .feds-nav > section.feds-navItem > button.feds-navLink");if(V(e,.075),this.isLocalNav()&&this.hasMegaMenu()){K();const t=e[0];queueMicrotask((()=>t.click()))}}else t&&this.isLocalNav()&&Y();["main","footer"].forEach((e=>document.querySelector(e)?.setAttribute("aria-hidden",!t))),e?.setAttribute("aria-expanded",!t),document.body.classList.toggle("disable-scroll",!t),this.elements.navWrapper?.classList?.toggle("feds-nav-wrapper--expanded",!t),y(),U(!t),e?.setAttribute("daa-ll","hamburgermenu|"+(t?"open":"close"))};decorateToggle=()=>{if(!this.mainNavItemCount||this.newMobileNav&&!this.hasMegaMenu())return"";const e=D`<button
      class="feds-toggle"
      daa-ll="hamburgermenu|open"
      aria-expanded="false"
      aria-haspopup="true"
      aria-label="Navigation menu"
      aria-controls="feds-nav-wrapper"
      data-feds-preventAutoClose>
      </button>`,t=()=>{if(A.matches)this.elements.mainNav.style.removeProperty("padding-bottom");else{const e=Math.ceil(this.elements.topnavWrapper.getBoundingClientRect().bottom);this.elements.mainNav.style.setProperty("padding-bottom",2*e+"px")}},a=async()=>{this.toggleMenuMobile(),this.blocks?.search?.instance?this.blocks.search.instance.clearSearchForm():await this.loadSearch(),this.isToggleExpanded()&&t()};e.addEventListener("click",(()=>P(a,"Toggle click failed","gnav","e")));const n=()=>{A.matches&&(e.setAttribute("aria-expanded",!1),this.elements.navWrapper.classList.remove("feds-nav-wrapper--expanded"),document.body.classList.remove("disable-scroll"),U(!1),y(),this.blocks?.search?.instance?.clearSearchForm())};return A.addEventListener("change",(()=>P(n,"Toggle logic failed on device change","gnav","e"))),e};decorateGenericLogo=({selector:e,classPrefix:t,includeLabel:a=!0,analyticsValue:n}={})=>{const s=this.content.querySelector(e);if(!s)return"";const i=/(\.png|\.jpg|\.jpeg)/,r=[...s.querySelectorAll("a")],o=r.find((e=>!i.test(e.href)&&!i.test(e.textContent)));if(!o)return"";const l=s.matches(q.brandImageOnly),c=!s.matches(".no-logo"),d=!l&&a&&!s.matches(".image-only");if(!c&&!d)return"";const p=l?` ${q.brandImageOnly.slice(1)}`:"",u=c?D`<span class="${t}-image${p}">${(()=>{if(F()){const e=s.querySelectorAll('picture img[src$=".svg"]');if(2===e.length)return e[1];const t=r.filter((e=>i.test(e.href)||i.test(e.textContent)));if(2===t.length)return se(t[1],l)}const e=s.querySelector('picture img[src$=".svg"]');if(e)return e;const t=r.find((e=>i.test(e.href)||i.test(e.textContent)));return se(t,l)})()}</span>`:"",m=d?D`<span class="${t}-label">${o.textContent}</span>`:"",v=D`
      <a href="${o.href}" class="${t}" daa-ll="${n}">
        ${u}
        ${m}
      </a>`;return!d&&o.textContent.length&&v.setAttribute("aria-label",o.textContent),v};decorateAside=async()=>{performance.mark("Gnav-Aside-Start"),this.elements.aside="";const e=t("gnav-promo-source"),a=document.querySelector(".feds-promo-aside-wrapper");if(!e||!p)return a?.remove(),this.block.classList.remove("has-promo"),this.elements.aside;const{default:n}=await p;if(!n)return this.elements.aside;this.elements.aside=await n({headerElem:this.block,fedsPromoWrapper:a,promoPath:e}),a.append(this.elements.aside);const s=()=>{const e=`${this.elements.aside.clientHeight}px`,t=document.querySelector("header"),n=document.querySelector(".feds-localnav");a.style.height=e,t.style.top=e,!A.matches&&n&&(t.style.top=0,n.style.top=e)};return this.elements.aside.clientHeight>a.clientHeight&&(x({message:"Promo height is more than expected, potential CLS",tags:"gnav-promo",errorType:"i"}),s(),this.promoResizeObserver?.disconnect(),this.promoResizeObserver=new ResizeObserver(s),this.promoResizeObserver.observe(this.elements.aside)),performance.mark("Gnav-Aside-End"),ee("Gnav-Aside-Time","Gnav-Aside-Start","Gnav-Aside-End"),this.elements.aside};decorateBrand=()=>this.decorateGenericLogo({selector:".gnav-brand",classPrefix:"feds-brand",analyticsValue:"Brand"});decorateLogo=()=>this.decorateGenericLogo({selector:".adobe-logo",classPrefix:"feds-logo",includeLabel:!1,analyticsValue:"Logo"});decorateMainNav=async()=>{performance.mark("Decorate-MainNav-Start");const e=A.matches?"":await this.decorateBreadcrumbs();this.elements.mainNav=D`<div class="feds-nav" role="list"></div>`,this.elements.navWrapper=D`
      <div class="feds-nav-wrapper" id="feds-nav-wrapper">
        ${e}
        ${A.matches?"":this.decorateSearch()}
        ${this.elements.mainNav}
        ${A.matches?this.decorateSearch():""}
      </div>
    `;const t=[...this.content.querySelectorAll("h2, p:only-child > strong > a, p:only-child > em > a")].filter((e=>CONFIG.features.every((t=>!e.closest(`.${t}`)))));this.mainNavItemCount=t.length;for await(const[e,a]of t.entries()){await H();const t=this.decorateMainNavItem(a,e);t&&this.elements.mainNav.appendChild(t)}return this.newMobileNav&&await this.decorateLocalNav(),performance.mark("Decorate-MainNav-End"),this.elements.mainNav};getMainNavItemType=e=>{const t=e.closest("div"),a=!!e.closest(".link-group");if(t instanceof HTMLElement&&!a&&t.childElementCount>1)return"syncDropdownTrigger";if(t instanceof HTMLElement&&t.closest(".large-menu")instanceof HTMLElement)return"asyncDropdownTrigger";if(e.closest("strong")instanceof HTMLElement)return"primaryCta";if(e.closest("em")instanceof HTMLElement)return"secondaryCta";return!(e.querySelector("a")instanceof HTMLElement)?"text":"link"};updatePopupPosition=e=>{const t=e||this.elements.mainNav?.querySelector(".feds-navItem--section.feds-dropdown--active .feds-popup");if(!t)return;const a=this.block.classList.contains("has-promo"),n=this.elements.aside?.clientHeight;if(!this.isLocalNav())return void(a&&(t.style.top=`calc(0px - var(--feds-height-nav) - ${n}px)`));const s=window.scrollY||Math.abs(parseInt(document.body.style.top,10))||0,i=a?`var(--feds-height-nav) - ${n}px`:"var(--feds-height-nav)";t.removeAttribute("style"),t.style.top=`calc(${s}px - ${i} - 2px)`;const{isPresent:r,isSticky:o,height:l}=X();if(r){const e=s-l;o?t.style.height=`calc(100dvh - ${l}px + 2px)`:(t.style.top=`calc(0px - var(--feds-height-nav) + ${Math.max(e,0)}px - 2px)`,t.style.height=`calc(100dvh + ${Math.min(e,0)}px + 2px)`)}};decorateMainNavItem=(e,t)=>{performance.mark(`Decorate-MainNav-Item-${t}-Start`);const a=this.getMainNavItemType(e),n=["syncDropdownTrigger","link"].includes(a)&&L(e.closest("div"))instanceof HTMLElement,s=n?` ${q.activeNavItem.slice(1)}`:"",i=e=>{if(e.classList.contains("loading"))return;const t=e.querySelectorAll(".global-navigation .tabs button"),a=e.querySelectorAll('.global-navigation .tab-content [role="tabpanel"]');z(t,a);const{origin:n,pathname:s}=window.location,i=`${n}${s}`;setTimeout((()=>{const t=[...e.querySelectorAll("a:not([data-modal-hash])")].find((e=>e.href===i||e.href.startsWith(`${i}?`)||e.href.startsWith(`${i}#`))),a=t?+t.parentNode.id:0,n=e.querySelectorAll(".tab")[a],s=n.getAttribute("daa-ll");n.setAttribute("daa-ll",`${s?.replace("click","open")}`),n?.click(),n.setAttribute("daa-ll",`${s?.replace("open","click")}`),n?.focus()}),100)};function r(e){new MutationObserver((()=>{const t="header|"+("true"===e.getAttribute("aria-expanded")?"Close":"Open");e.setAttribute("daa-lh",t)})).observe(e,{attributeFilter:["aria-expanded"]})}const o=({template:t}={})=>{let n,s=null,o=()=>{};const l=()=>P((async()=>{t.removeEventListener("click",l),clearTimeout(n);const c=t.querySelector(".feds-popup.loading")?.innerHTML;if((await C()).decorateMenu({item:e,template:t,type:a}).then((async()=>{const a=t.querySelector(".feds-popup");s=a.innerHTML,this.newMobileNav&&!A.matches&&a&&(o(),o=await _({popup:a,item:e,localnav:this.isLocalNav(),toggleMenu:this.toggleMenuMobile}),a.closest("section.feds-dropdown--active")&&i(a))})).finally((()=>{this.isLocalNav()&&((e,t)=>{const a=[...document.querySelectorAll(".feds-localnav .feds-navItem")].find((t=>{const a=t.querySelector("a, button");return a.setAttribute("tabindex","-1"),a.setAttribute("aria-hidden",!0),a.dataset.title?.trim()===e.textContent}));if(a){const e=a.querySelector("button");a.innerHTML=t.innerHTML,e&&(a.querySelector("button").textContent=e.textContent),a.querySelector(".feds-localnav-items button")?.addEventListener("click",(e=>{W({element:e.currentTarget,event:e,type:"localNavItem"})}));const n=a.querySelector(".feds-localnav-items button[aria-expanded]");n&&r(n),a.querySelectorAll(".feds-menu-headline").forEach((e=>{e?.setAttribute("role","button"),e?.setAttribute("tabindex",0),e?.removeAttribute("aria-level"),e?.setAttribute("aria-haspopup",!0),e?.setAttribute("aria-expanded",!1),e?.addEventListener("click",(e=>{W({element:e.currentTarget,event:e,type:"headline"})})),e.textContent=e.textContent?.trim()}))}})(e,t)})),this.newMobileNav){const a=t.querySelector(".feds-popup");!A.matches&&a?(o(),o=await _({popup:a,item:e,localnav:this.isLocalNav(),toggleMenu:this.toggleMenuMobile}),a.style.removeProperty("visibility")):A.matches&&a?.style.removeProperty("visibility"),A.addEventListener("change",(async()=>{const a=t.querySelector(".feds-popup");a&&(Y(),A.matches?(a.innerHTML=s??c,this.block.classList.remove("new-nav")):(o(),o=await _({popup:a,item:e,localnav:this.isLocalNav(),toggleMenu:this.toggleMenuMobile}),this.block.classList.add("new-nav")))}))}}),"Decorate dropdown failed","gnav","i");t.addEventListener("click",l);const c=this.newMobileNav&&!A.matches;if("asyncDropdownTrigger"===a&&(c||A.matches)){const e=Z();e.style.visibility="hidden",t.append(e)}n=setTimeout(l,CONFIG.delays.mainNavDropdowns)},l=(()=>{switch(a){case"syncDropdownTrigger":case"asyncDropdownTrigger":{const a=D`<button
            class="feds-navLink feds-navLink--hoverCaret"
            aria-expanded="false"
            aria-haspopup="true"
            daa-ll="${N(e.textContent,t+1)}"
            daa-lh="header|Open">
              ${e.textContent.trim()}
            </button>`,n=e.closest(".section")instanceof HTMLElement,l=n?"section":"div",c=n?" feds-navItem--section":"",d=n?` daa-lh='${N(e.textContent)}'`:"",p=D`
            <${l} role="listitem" class="feds-navItem${c}${s}" ${d}>
              ${a}
            </${l}>`;return a.addEventListener("click",(e=>{if(!A.matches&&this.newMobileNav&&n){const e=a.nextElementSibling;e&&this.updatePopupPosition(e),i(e)}else if(A.matches&&this.newMobileNav&&n){const e=a.nextElementSibling;e&&e.style.removeProperty("top")}W({element:a,event:e,type:"dropdown"}),O(a)})),r(a),o({template:p}),j(p,e)}case"primaryCta":case"secondaryCta":return e.parentElement.replaceWith(e),j(D`<div class="feds-navItem feds-navItem--centered" role="listitem">
              ${w({elem:e,type:a,index:t+1})}
            </div>`,e);case"link":{let a="",i=!1;const r=e.querySelector("a"),o=e.closest(".link-group");if(r.className="feds-navLink",r.setAttribute("daa-ll",N(r.textContent,t+1)),o){const e=()=>{const e=new URL(r.href);r.setAttribute("href",`${e.origin}${e.pathname}${e.search}`),E(r)&&r.removeAttribute("href");const t=e.hash.slice(2);return!this.customLinks.includes(t)};[...o.classList].splice(1).forEach((e=>{a=` feds-navItem--${e}`})),i=e()}else n&&(r.removeAttribute("href"),r.setAttribute("role","link"),r.setAttribute("aria-disabled","true"),r.setAttribute("aria-current","page"),r.setAttribute("tabindex",0));const l=D`
            <div class="feds-navItem${s}${a}" role="listitem">
              ${r}
            </div>`;return i?"":j(l,e)}case"text":return j(D`<div class="feds-navItem feds-navItem--centered">
              ${e.textContent}
            </div>`,e);default:return j(D`<div class="feds-navItem feds-navItem--centered">
              ${e}
            </div>`,e)}})();return performance.mark(`Decorate-MainNav-Item-${t}-End`),l};decorateBreadcrumbs=async()=>{if(performance.mark("Breadcrumbs-Start"),!this.block.classList.contains("has-breadcrumbs"))return null;if(this.elements.breadcrumbsWrapper)return this.elements.breadcrumbsWrapper;const e=this.block.querySelector(".breadcrumbs");if(e&&i(e),!u)return null;const{default:t}=await u;return this.elements.breadcrumbsWrapper=await t(e),performance.mark("Breadcrumbs-End"),this.elements.breadcrumbsWrapper};searchPresent=()=>!!this.content.querySelector(".search");decorateSearch=()=>this.searchPresent()?(this.blocks.search.config.trigger=D`
      <button class="feds-search-trigger" aria-label="Search" aria-expanded="false" aria-controls="feds-search-bar" daa-ll="Search">
        ${this.blocks.search.config.icon}
        <span class="feds-search-close"></span>
      </button>`,this.elements.search=D`
      <div class="feds-search">
        ${this.blocks.search.config.trigger}
      </div>`,f("search",c()).then((e=>{e&&e.length&&this.blocks.search.config.trigger.setAttribute("aria-label",e)})),this.blocks.search.config.trigger.addEventListener("click",(async()=>{await this.loadSearch()})),this.elements.search):null}export default async function re(a){const{mep:n}=e(),s=await o();let i=new URLSearchParams(window.location.search).get("newNav");i=i?"false"!==i:"off"!==t("mobile-gnav-v2");const[r,l=""]=s.split("#");"_noActiveItem"===l&&B();const c=await k({url:r,plainHTMLPromise:d});if(!c){const e=new Error("Could not create global navigation. Content not found!");throw e.tags="gnav",e.url=r,e.errorType="e",x({message:e.message,...e}),e}J(c.querySelectorAll(".large-menu").length);const p=new ie({content:c,block:a,newMobileNav:i});i&&!A.matches&&a.classList.add("new-nav"),await p.init(),p.isLocalNav()&&a.classList.add("local-nav"),a.setAttribute("daa-im","true");const u=n?.martech||"";return a.setAttribute("daa-lh",`gnav|${S()}${u}`),F()&&a.classList.add("feds--dark"),a.classList.add("ready"),performance.mark("Gnav-Visible"),performance.mark("Gnav-Init-End"),ee("Gnav-Init-Function-Time","Gnav-Start","Gnav-Init-End"),ee("Gnav-Time-To-Visible","Gnav-Start","Gnav-Visible"),p}