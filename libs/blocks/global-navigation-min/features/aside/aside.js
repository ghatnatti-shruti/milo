import{loadBlock as t,decorateAutoBlock as e}from"../../../../utils/utils.js";import{toFragment as r,lanaLog as a}from"../../utilities/utilities.js";import{processTrackingLabels as o}from"../../../../martech/attributes.js";export default async function i({headerElem:i,fedsPromoWrapper:s,promoPath:m}={}){const l=()=>(s?.remove(),i?.classList.remove("has-promo"),a({message:"Gnav Promo fragment not replaced, potential CLS"}),""),n=r`<a href="${m}">${m}</a>`,c=r`<div>${n}</div>`;if(e(n),!n.classList.contains("fragment"))return l();await t(n).catch((()=>l()));const u=c.querySelector(".aside");return c.contains(n)||!u?l():(u.removeAttribute("data-block"),u.setAttribute("daa-lh","Promo"),u.querySelectorAll("a").forEach(((t,e)=>{t.setAttribute("daa-ll",`${o(t.textContent)}--${e+1}`)})),u)}